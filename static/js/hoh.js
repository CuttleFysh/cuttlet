var chat=new CuttleChat,label_num_questions=document.getElementById("label_num_questions"),label_percent=document.getElementById("label_percent"),current_question=document.getElementById("current_question"),current_username=document.getElementById("current_username"),container_queue=document.getElementById("container_queue"),container_timer=document.getElementById("container_timer"),start_time=0,questions_answered=0,saved=[],honesty="",agree=0,voters=0;
function updateTime(){900==start_time&&(document.getElementById("quarter_hoh").innerHTML="1/4 HoH: "+honesty);1800==start_time&&(document.getElementById("half_hoh").innerHTML="1/2 HoH: "+honesty);3600==start_time&&(document.getElementById("one_hoh").innerHTML="Completed: "+honesty);var a=Math.floor(start_time/60),b=start_time%60;start_time++;container_timer.innerHTML=(10>a?"0"+a:a)+":"+(10>b?"0"+b:b)}function limitIndex(a,b){return a<=b?a:b}
function selectQuestion(a){current_username.style.display="inline-block";questions_answered++;label_num_questions.innerHTML="Answered: "+questions_answered;a=a.target.dataset.index;current_question.innerHTML=saved[a].question;current_username.innerHTML=saved[a].username;saved.splice(a,1);updateQueue()}
function updateQueue(){container_queue.innerHTML="";0===saved.length&&(container_queue.innerHTML="Waiting for questions...");for(var a=0;a<limitIndex(saved.length,9);a++){var b=document.createElement("span");b.className="container_question";b.innerHTML=saved[a].question;b.dataset.index=[a];var c=document.createElement("div");c.className="container_next";c.dataset.index=[a];c.appendChild(b);container_queue.appendChild(c);c.addEventListener("click",selectQuestion,!1)}}
window.onload=function(){setInterval(updateTime,1E3);chat.open(function(a,b){(msg_question=b.substring(0,b.indexOf("?")+1))&&"?"!==msg_question&&1E4>=saved.length&&(saved.push({username:a,question:msg_question}),updateQueue());b.toLowerCase().startsWith("yes")?(agree++,voters++):b.toLowerCase().startsWith("no")&&voters++;0<voters&&(honesty=Math.floor(agree/voters*100)+"%");label_percent.innerHTML="Honesty at: "+honesty})};
