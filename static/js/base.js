var TWITCH_CLIENT_ID="jyxzi98m2x4l2cho0gairq05gsb3uq",YOUTUBE_API_KEY="AIzaSyBVk4DHhn0ttjehRVvBCkLF1Whvw882kz8",header_stream_link=document.getElementById("header_stream_link"),header_info_stream=document.getElementById("header_info_stream"),header_info_user=document.getElementById("header_info_user"),header_ml=document.getElementById("header_ml"),header_user_img=document.getElementById("header_user_img"),header_username=document.getElementById("header_username"),header_dropdown=document.getElementById("header_dropdown"),
arrow_dropdown=document.getElementById("arrow_dropdown");header_info_stream&&window.addEventListener("load",loadStreamInfo,!1);header_info_user&&header_info_user.addEventListener("click",showDropdown,!1);header_dropdown&&document.addEventListener("click",checkHiddenOnClick,!1);function checkHiddenOnClick(){event.target.closest("#header_info_user")||"block"!==getComputedStyle(header_dropdown).display||(arrow_dropdown.innerHTML="&#x25BE;",header_dropdown.classList.toggle("hidden"))}
function showDropdown(){event.target.closest("#header_dropdown")||("block"===getComputedStyle(header_dropdown).display?arrow_dropdown.innerHTML="&#x25BE;":arrow_dropdown.innerHTML="&#x25B4;",header_dropdown.classList.toggle("hidden"))}
function updateInfoStream(a,b,h,g,k,l){var c=document.getElementById("header_title_stream"),e=document.getElementById("header_viewers"),d=document.getElementById("header_is_live"),f=document.getElementById("header_thumb_stream");a?("false"===d.dataset.islive&&window.location.reload(),sessionStorage.setItem("streamid",b),d.style.display="block",c.style["text-align"]="left",c.style.height="18px",c.style["line-height"]="18px",c.innerHTML=h,0<g&&(e.innerHTML=g+" watching"),d.dataset.islive="true",d.innerHTML=
'<span style="color:red">&#x25CF</span> LIVE',f.style.display="block",f.src=k,header_stream_link.setAttribute("href",l)):(sessionStorage.setItem("streamid",""),"block"===getComputedStyle(c).display?(d.style.display="none",e.style.display="none",c.style["text-align"]="center",c.style.height="36px",c.style["line-height"]="36px",c.innerHTML="OFFLINE",e.innerHTML="",d.dataset.islive="false",d.innerHTML="",f.style.display="none"):(d.style.display="block",d.innerHTML="OFF"))}
function updateIsTwitchLive(a){var b=new XMLHttpRequest;b.open("GET","https://api.twitch.tv/kraken/streams/"+a);b.setRequestHeader("Accept","application/vnd.twitchtv.v5+json");b.setRequestHeader("Client-ID",TWITCH_CLIENT_ID);b.onreadystatechange=function(a){4==b.readyState&&200==b.status&&(r=JSON.parse(b.response),r.stream?updateInfoStream(!0,r.stream.channel.name,r.stream.channel.status,r.stream.viewers,r.stream.preview.small,r.stream.channel.url):updateInfoStream(!1))};b.send(null)}
function updateIsYoutubeLive(a){var b=new XMLHttpRequest;b.open("GET","https://www.googleapis.com/youtube/v3/search?"+("part=snippet&channelId="+a+"&eventType=live&type=video&key="+YOUTUBE_API_KEY));b.onreadystatechange=function(a){4==b.readyState&&200==b.status&&(a=JSON.parse(b.response),0<a.pageInfo.totalResults?updateInfoStream(!0,a.items[0].id.videoId,a.items[0].snippet.title,"",a.items[0].snippet.thumbnails["default"].url,"https://www.youtube.com/watch?v="+a.items[0].id.videoId):updateInfoStream(!1))};
b.send(null)}function loadStreamInfo(){if(header_info_stream){var a=header_info_stream.dataset.id;switch(header_info_stream.dataset.acctype){case "twitch":updateIsTwitchLive(a);setInterval(function(){updateIsTwitchLive(a)},3E3);break;case "youtube":updateIsYoutubeLive(a),setInterval(function(){updateIsYoutubeLive(a)},3E4)}}};
