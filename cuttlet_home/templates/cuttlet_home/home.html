{% extends 'cuttlet_home/base.html' %}

{% block content %}
    {% csrf_token %}
    <p>
        Welcome to Cuttlebay
    </p>
    {% if user.is_authenticated %}
        <div    id="info_connected_channels"
                data-twitch-id="{{ user.profile.twitch_channel }}"
                data-youtube-id="{{ user.profile.youtube_channel }}">
            <div class="container_channel">
                {% if user.profile.twitch_channel %}
                    <img id="img_twitch_thumbnail" src="" alt="Twitch channel thumbnail">
                    <div id="field_twitch_username"></div>
                    <div id='is_online_twitch'>OFFLINE</div>
                    <div id="button_logout_twitch">Logout Twitch</div>
                {% else %}
                    <div id="button_login_twitch">Twitch Login</div>
                {% endif %}
            </div>
            <div class="container_channel">
                {% if user.profile.youtube_channel %}
                    <img id="img_youtube_thumbnail" src="" alt="Youtube channel thumbnail">
                    <div id="field_youtube_channel"></div>
                    <div id="is_online_youtube">OFFLINE</div>
                    <div id="button_logout_youtube">Logout Youtube</div>
                {% else %}
                    <div id="button_login_youtube">Youtube Login</div>
                {% endif %}
            </div>
            {% if user.profile.youtube_channel or user.profile.twitch_channel %}
                <div id="button_reload_channels_info">Reload</div>
            {% endif %}
        </div>
    {% endif %}
    <!-- TODO: two connect buttons (Twitch and Youtube)
    ** Single OAuth login to get username (Twitch) and channelID (YouTube)
    ** Store the username ^NOR channelID in the user_profile
    Twitch:
        ** Use channel_id to get the username and connect to IRC channel
           auth token of Cuttlebay account
    Youtube:
        ** Use Data API to connect to chat, follow path,
           Search list// part: snippet, channelID: DB,
           eventType: live, type: video. Retrieve liveChatID
       ** Scope: https://www.googleapis.com/auth/youtube.readonly -->

{% endblock %}
